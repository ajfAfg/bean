#!/usr/bin/env python3

import subprocess as sp
import shutil

for i in range(1, 13):
for j in range(1, 11):
    sp.run(['rebar3', 'escriptize'], stdout=sp.DEVNULL, stderr=sp.STDOUT)
    sp.run(['_build/default/bin/time_required_to_restart',
            'generate-gen-server', str(i), str(j)])

    sp.run(['rebar3', 'bean'], stdout=sp.DEVNULL, stderr=sp.STDOUT)

    sp.run(['rebar3', 'escriptize'], stdout=sp.DEVNULL, stderr=sp.STDOUT)
    sp.run(['_build/default/bin/time_required_to_restart',
            'measure', str(i), str(j)])

    shutil.rmtree('src/gen_servers')
    shutil.rmtree('src/bean')
